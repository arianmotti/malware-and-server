import socket
import os

def first_part(port= 3333):
    s = socket.socket()
    s.connect(('127.0.0.1', port))
    print(s.recv(3000).decode())
    s.close()

def second_part(port= 3100):
    s = socket.socket()
    s.connect(('127.0.0.1', port))
    sysinfo =  os.popen("systeminfo").read().split('\n')
    data = ''
    for item in sysinfo:
        data += str(item.split("\r"))
    data_bytes = bytes(data, 'utf-8')
    s.sendall(data_bytes)
    print(f"data from server: {s.recv(1024).decode()}")
    s.close()

def third_part(port= 3101):
    s = socket.socket()
    s.connect(('127.0.0.1', port))
    while True:
        option = s.recv(1024).decode()
        if option == 'sysinfo':
            sysinfo =  os.popen("systeminfo").read().split('\n')
            data = ''
            for item in sysinfo:
                data += str(item.split("\r"))
            data_bytes = bytes(data, 'utf-8')
            s.sendall(data_bytes)
            print(f"data from server: {s.recv(1024).decode()}")
        elif option == 'close':
            print('Closing connection...')
            break
    s.close()
#part 1
# first_part()
#part 2
#second_part()
#part 3
third_part()